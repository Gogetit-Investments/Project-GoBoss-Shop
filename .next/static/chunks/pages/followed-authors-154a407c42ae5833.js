(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6714],{17591:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/followed-authors",function(){return t(17307)}])},95070:function(e,r,t){"use strict";t.d(r,{Z:function(){return f}});var n=t(85893),a=t(14685),i=t(97168),o=t(88767),s=t(66639),l=t(21880),u=t(28763);function d(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function c(e){return(0,n.jsxs)("svg",function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){d(e,r,t[r])}))}return e}({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e,{children:[(0,n.jsx)("path",{d:"M12.8032 2.1968C9.87413 -0.732275 5.12522 -0.732276 2.19677 2.19686C-0.732275 5.1259 -0.732276 9.87478 2.19688 12.8032C5.12522 15.7323 9.87413 15.7323 12.8032 12.8032C15.7323 9.87478 15.7323 5.1259 12.8032 2.1968ZM11.9194 11.9193C9.47842 14.3602 5.52105 14.3602 3.08077 11.9194C0.639814 9.47897 0.639814 5.52161 3.08071 3.08071C5.52105 0.639785 9.47842 0.639785 11.9193 3.08071C14.3602 5.52164 14.3602 9.47898 11.9194 11.9193Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M10.5935 4.40647C10.3495 4.1624 9.95371 4.1624 9.70964 4.40647L7.49992 6.61619L5.29021 4.40647C5.04614 4.1624 4.65039 4.1624 4.40632 4.40647C4.16225 4.65055 4.16225 5.04629 4.40632 5.29036L6.61604 7.50008L4.40714 9.70897C4.16307 9.95304 4.16307 10.3488 4.40714 10.5929C4.65121 10.8369 5.04696 10.8369 5.29103 10.5929L7.49992 8.38396L9.70946 10.5935C9.95354 10.8376 10.3493 10.8376 10.5934 10.5935C10.8374 10.3494 10.8374 9.95369 10.5934 9.70962L8.38381 7.50008L10.5935 5.29036C10.8376 5.04629 10.8376 4.65057 10.5935 4.40647Z",fill:"currentColor"})]}))}var g=t(10268);function f(e){var r=e.shop_id,t=(0,o.useQueryClient)(),d=(0,s.P)(),f=d.isAuthorized,h=d.isLoading,m=d.me,x=(0,o.useQuery)([l.P.FOLLOW_SHOP,r],(function(){return u.Z.follow.isShopFollowed({shop_id:r})}),{enabled:f}),p=x.data,b=x.isLoading,v=(0,o.useMutation)(u.Z.follow.toggle,{onSettled:function(){t.invalidateQueries([l.P.FOLLOW_SHOP,r]),t.invalidateQueries([l.P.FOLLOWED_SHOPS])}}).mutate,j=(0,g.$G)("common").t;return(0,n.jsx)(n.Fragment,{children:f&&m&&!h&&(0,n.jsx)(a.Z,{onClick:function(){v({shop_id:r})},variant:p?"solidDanger":"outline",className:"followButton h-9 min-h-[36px] rounded-md p-2 px-3 text-xs sm:h-11 sm:min-h-[44px] md:px-4 ".concat(!p&&"text-brand dark:text-brand"),isLoading:b,children:!b&&(0,n.jsx)(n.Fragment,{children:p?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c,{className:"h-[15px] w-[15px] text-current"}),j("text-unfollow")]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.U,{className:"h-4 w-4 text-current"})," ",j("text-follow")]})})})})}},56575:function(e,r,t){"use strict";t.d(r,{NT:function(){return u},LV:function(){return d},Uu:function(){return c}});var n=t(88767),a=t(21880),i=t(28763),o=t(11163);function s(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){s(e,r,t[r])}))}return e}function u(e,r){var t,s=l({},e,{language:(0,o.useRouter)().locale}),u=(0,n.useInfiniteQuery)([a.P.TOP_SHOPS,s],(function(e){var r=e.queryKey,t=e.pageParam;return i.Z.shops.top(Object.assign({},r[1],t))}),l({},r,{getNextPageParam:function(e){var r=e.current_page;return e.last_page>r&&{page:r+1}}})),d=u.data,c=u.isLoading,g=u.error,f=u.fetchNextPage,h=u.hasNextPage,m=u.isFetching,x=u.isFetchingNextPage;return{shops:null!==(t=null===d||void 0===d?void 0:d.pages.flatMap((function(e){return e.data})))&&void 0!==t?t:[],isLoading:c,error:g,hasNextPage:h,isFetching:m,isLoadingMore:x,loadMore:function(){f()}}}function d(e,r){var t,o=(0,n.useInfiniteQuery)([a.P.FOLLOWED_SHOPS,e],(function(e){var r=e.queryKey,t=e.pageParam;return i.Z.follow.shops(Object.assign({},r[1],t))}),l({},r,{getNextPageParam:function(e){var r=e.current_page;return e.last_page>r&&{page:r+1}}})),s=o.data,u=o.isLoading,d=o.error,c=o.fetchNextPage,g=o.hasNextPage,f=o.isFetching,h=o.isFetchingNextPage;return{shops:null!==(t=null===s||void 0===s?void 0:s.pages.flatMap((function(e){return e.data})))&&void 0!==t?t:[],paginatorInfo:Array.isArray(null===s||void 0===s?void 0:s.pages)?null===s||void 0===s?void 0:s.pages[s.pages.length-1]:null,isLoading:u,error:d,hasNextPage:g,isFetching:f,isLoadingMore:h,loadMore:function(){c()}}}function c(e){var r=l({},e,{language:(0,o.useRouter)().locale}),t=(0,n.useQuery)([a.P.FOLLOWED_SHOPS_PRODUCTS,r],(function(e){var r=e.queryKey;return i.Z.follow.followedShopProducts(Object.assign({},r[1]))})),s=t.data;return{products:null!==s&&void 0!==s?s:[],isLoading:t.isLoading,error:t.error}}},17307:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSG:function(){return p}});var n=t(85893),a=t(10268),i=t(42485),o=t(91478),s=t(63879),l=t(62554),u=t(994),d=t(14685),c=t(18818),g=t(56575),f=t(95070);function h(e){var r,t=e.shop,a=null!==t&&void 0!==t?t:{},i=a.name,o=a.logo;return(0,n.jsxs)("div",{className:"flex items-center gap-4 border-b border-light-400 py-5 last:border-b-0 dark:border-dark-400 sm:gap-5",children:[(0,n.jsx)("div",{className:"relative aspect-square w-16 flex-shrink-0 border border-light-300 dark:border-0",children:(0,n.jsx)(s.Z,{alt:i,layout:"fill",quality:100,objectFit:"cover",src:null!==(r=null===o||void 0===o?void 0:o.original)&&void 0!==r?r:c.Z,className:"rounded-3xl bg-light-400 dark:bg-dark-400"})}),(0,n.jsxs)("div",{className:"flex flex-1 flex-col items-start sm:flex-row sm:items-center sm:justify-between",children:[(0,n.jsx)("div",{className:"pb-2 sm:pb-0",children:(0,n.jsx)("h3",{className:"my-1.5 font-medium text-dark dark:text-light",children:i})}),(0,n.jsx)(f.Z,{shop_id:t.id})]})]})}function m(){return(0,n.jsxs)("div",{className:"flex animate-pulse items-start gap-4 border-b border-light-400 py-4 last:border-b-0 dark:border-dark-400 sm:items-stretch sm:gap-5",children:[(0,n.jsx)("div",{className:"relative aspect-[5/3.4] w-28 flex-shrink-0 bg-light-400 dark:bg-dark-400 sm:w-32 md:w-36"}),(0,n.jsxs)("div",{className:"flex flex-1 flex-col gap-4 sm:flex-row sm:items-center sm:justify-between md:gap-0",children:[(0,n.jsxs)("div",{className:"h-full flex-grow border-b border-light-400 pb-3 dark:border-dark-600 sm:border-b-0 sm:pb-0",children:[(0,n.jsx)("div",{className:"mb-3 h-2.5 w-1/4 bg-light-400 dark:bg-dark-400"}),(0,n.jsx)("div",{className:"mb-6 h-2.5 w-2/4 bg-light-400 dark:bg-dark-400"}),(0,n.jsx)("div",{className:"h-2.5 w-1/5 bg-light-400 dark:bg-dark-400"})]}),(0,n.jsx)("div",{className:"h-2.5 w-1/3 bg-light-400 dark:bg-dark-400 sm:h-12 sm:w-1/4 sm:rounded md:w-1/6"})]})]})}var x=function(){var e=(0,g.LV)({limit:10}),r=e.shops,t=e.loadMore,o=e.hasNextPage,s=e.isLoadingMore,c=e.isLoading,f=(0,a.$G)("common").t;return(0,n.jsxs)(i.E.div,{variants:(0,l.op)(),className:"flex min-h-full flex-grow flex-col",children:[(0,n.jsxs)("h1",{className:"mb-3 text-15px font-medium text-dark dark:text-light",children:[f("text-followed-authors"),(0,n.jsxs)("span",{className:"ml-1 text-light-900",children:["(",r.length,")"]})]}),c&&!r.length&&(0,u.Z)(10,(function(e){return(0,n.jsx)(m,{},"shop-loader-".concat(e))})),!c&&r&&r.map((function(e){return(0,n.jsx)(h,{shop:e},"shop-".concat(e.id))})),o&&(0,n.jsx)("div",{className:"mt-10 grid place-content-center",children:(0,n.jsx)(d.Z,{onClick:t,disabled:s,isLoading:s,children:"Load more"})})]})};x.authorization=!0,x.getLayout=function(e){return(0,n.jsx)(o.Z,{children:e})};var p=!0;r.default=x}},function(e){e.O(0,[4698,6489,178,1478,9774,2888,179],(function(){return r=17591,e(e.s=r);var r}));var r=e.O();_N_E=r}]);